{"ast":null,"code":"var _jsxFileName = \"/Users/iLuna/Desktop/CS6301/6301Fall21PTTPrj2/PTTWeb2/pttweb2/src/routes/User.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Button, TextField, Grid } from \"@material-ui/core\";\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport { apiUrl } from \"../config.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function User({\n  location: {\n    state: {\n      firstName,\n      lastName,\n      id\n    }\n  }\n}) {\n  _s();\n\n  const [projects, setProjects] = useState([{\n    id: 0\n  }]);\n  const [selectedProject, setSelectedProject] = useState({});\n  const [input, setInput] = useState(\"\");\n  const [update, setUpdate] = useState(false);\n  useEffect(() => {\n    const getProjects = async () => {\n      const {\n        data\n      } = await axios.get(`${apiUrl}/users/${id}/projects`);\n      setProjects(data);\n      setUpdate(false);\n    };\n\n    getProjects();\n  }, [update]);\n\n  const handleSelect = event => {\n    const {\n      target: {\n        value\n      }\n    } = event;\n    console.log(value);\n    setSelectedProject(value);\n  };\n\n  const handleDelete = async () => {\n    // This is for test-case. Later delete console.log and uncomment axios part\n    console.log(selectedProject.id);\n    const sessions = await axios.get(`${apiUrl}/users/${id}/projects/${selectedProject.id}/sessions`);\n\n    if (sessions.data.length == 0) {\n      const res = await axios.delete(`${apiUrl}/users/${id}/projects/${selectedProject.id}`);\n\n      if (res.status == 200) {\n        alert(\"Project \\\"\" + res.data.projectname + \"\\\" is successfully deleted.\");\n      }\n    } else {}\n\n    setSelectedProject({});\n    setUpdate(true);\n  };\n\n  const handleInput = event => {\n    const {\n      target: {\n        value\n      }\n    } = event;\n    setInput(value);\n  };\n\n  const handleCreate = async () => {\n    await axios.post(`${apiUrl}/users/${id}/projects`, {\n      projectname: input\n    });\n    setInput(\"\");\n    setUpdate(true);\n  };\n\n  const gridStyle = {\n    padding: 20,\n    height: \"60vh\",\n    width: 500,\n    margin: \"20px auto\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Manage Projects\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      style: gridStyle,\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        sx: {\n          width: 200\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          children: \"Project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: selectedProject,\n          onChange: handleSelect,\n          input: /*#__PURE__*/_jsxDEV(OutlinedInput, {\n            label: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 20\n          }, this),\n          children: projects.map(project => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: project,\n            children: project.projectname\n          }, project.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        style: {\n          marginLeft: 30\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"outlined-basic\",\n          label: \"New Project\",\n          variant: \"outlined\",\n          onChange: handleInput,\n          value: input\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleCreate,\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(User, \"zfe99691uiBYfdZrOUj2UFru0jQ=\");\n\n_c = User;\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"sources":["/Users/iLuna/Desktop/CS6301/6301Fall21PTTPrj2/PTTWeb2/pttweb2/src/routes/User.js"],"names":["useEffect","useState","axios","Button","TextField","Grid","OutlinedInput","InputLabel","MenuItem","FormControl","Select","apiUrl","User","location","state","firstName","lastName","id","projects","setProjects","selectedProject","setSelectedProject","input","setInput","update","setUpdate","getProjects","data","get","handleSelect","event","target","value","console","log","handleDelete","sessions","length","res","delete","status","alert","projectname","handleInput","handleCreate","post","gridStyle","padding","height","width","margin","map","project","marginLeft"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Button, TextField, Grid } from \"@material-ui/core\";\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport { apiUrl } from \"../config.json\";\n\nexport default function User({\n  location: {\n    state: { firstName, lastName, id },\n  },\n}) {\n  const [projects, setProjects] = useState([{ id: 0 }]);\n  const [selectedProject, setSelectedProject] = useState({});\n  const [input, setInput] = useState(\"\");\n  const [update, setUpdate] = useState(false);\n\n  useEffect(() => {\n    const getProjects = async () => {\n      const { data } = await axios.get(`${apiUrl}/users/${id}/projects`);\n      setProjects(data);\n      setUpdate(false);\n    };\n    getProjects();\n  }, [update]);\n\n  const handleSelect = (event) => {\n    const {\n      target: { value },\n    } = event;\n    console.log(value);\n    setSelectedProject(value);\n  };\n\n  const handleDelete = async () => {\n    // This is for test-case. Later delete console.log and uncomment axios part\n    console.log(selectedProject.id);\n    const sessions = await axios.get(`${apiUrl}/users/${id}/projects/${selectedProject.id}/sessions`);\n    if (sessions.data.length  == 0) {\n      const res = await axios.delete(`${apiUrl}/users/${id}/projects/${selectedProject.id}`);\n      if (res.status == 200) {\n        alert(\"Project \\\"\" + res.data.projectname + \"\\\" is successfully deleted.\");\n      }\n    } else {\n\n    }\n    setSelectedProject({});\n    setUpdate(true);\n  };\n\n  const handleInput = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setInput(value);\n  };\n\n  const handleCreate = async () => {\n    await axios.post(`${apiUrl}/users/${id}/projects`, {\n      projectname: input,\n    });\n    setInput(\"\");\n    setUpdate(true);\n  };\n\n  const gridStyle = {\n    padding: 20,\n    height: \"60vh\",\n    width: 500,\n    margin: \"20px auto\",\n  };\n\n  return (\n    <div style={{ margin: 20 }}>\n      <h1>Manage Projects</h1>\n      <Grid style={gridStyle}>\n        <FormControl sx={{ width: 200}}>\n          <InputLabel>Project</InputLabel>\n          <Select\n            value={selectedProject}\n            onChange={handleSelect}\n            input={<OutlinedInput label=\"Name\" />}\n          >\n            {projects.map((project) => (\n              <MenuItem key={project.id} value={project}>\n                {project.projectname}\n              </MenuItem>\n            ))}\n          </Select>\n          <Button variant=\"contained\" onClick={handleDelete}>\n            Delete\n          </Button>\n        </FormControl>\n\n        <FormControl style={{marginLeft:30}}>\n          <TextField\n            id=\"outlined-basic\"\n            label=\"New Project\"\n            variant=\"outlined\"\n            onChange={handleInput}\n            value={input}\n          />\n          <Button variant=\"contained\" onClick={handleCreate}>\n            Create\n          </Button>\n        </FormControl>\n      </Grid>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}